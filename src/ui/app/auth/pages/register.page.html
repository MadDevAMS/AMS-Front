<div class="flex flex-col gap-8">
  @if (page == 1) {
  <!-- Stepper -->
  <div class="grid grid-flow-col gap-2">
    <section class="flex flex-col gap-1.5">
      <span class="h-1 w-full rounded-3xl bg-[#5469D4]"></span>
      <div class="flex items-center justify-start gap-1">
        <svg
          width="16"
          height="16"
          viewBox="0 0 16 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M8 0.25C3.71978 0.25 0.25 3.71978 0.25 8C0.25 12.2802 3.71978 15.75 8 15.75C12.2802 15.75 15.75 12.2802 15.75 8C15.75 3.71978 12.2802 0.25 8 0.25ZM10.5 8C10.5 9.3785 9.3785 10.5 8 10.5C6.6215 10.5 5.5 9.3785 5.5 8C5.5 6.6215 6.6215 5.5 8 5.5C9.3785 5.5 10.5 6.6215 10.5 8Z"
            fill="#5469D4"
          />
        </svg>
        <p class="text-sm font-medium">Datos de usuario</p>
      </div>
    </section>
    <section class="flex flex-col gap-1.5">
      <span class="h-1 w-full rounded-3xl bg-[#C1C9D2]"></span>
      <div class="flex items-center justify-start gap-1">
        <svg
          width="16"
          height="16"
          viewBox="0 0 16 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M8 0.25C3.71875 0.25 0.25 3.71875 0.25 8C0.25 12.2812 3.71875 15.75 8 15.75C12.2812 15.75 15.75 12.2812 15.75 8C15.75 3.71875 12.2812 0.25 8 0.25ZM8 14.25C4.54688 14.25 1.75 11.4531 1.75 8C1.75 4.54688 4.54688 1.75 8 1.75C11.4531 1.75 14.25 4.54688 14.25 8C14.25 11.4531 11.4531 14.25 8 14.25Z"
            fill="#8792A2"
          />
        </svg>
        <p class="text-sm font-medium">Datos de empresa</p>
      </div>
    </section>
  </div>

  <!-- Page step 1 -->
  <div class="flex flex-col gap-[0.75rem]">
    <h2 class="text-[#1C1C1E] font-medium text-xl">Bienvenido a AMS</h2>
    <p class="text-base font-normal mb-4">
      Por favor, ingrese sus datos de usuario
    </p>
    <form
      class="flex flex-col gap-6"
      [formGroup]="formUser"
      (ngSubmit)="register()"
    >
      <!-- Input -->
      <div class="flex flex-col gap-4">
        <div class="flex gap-4">
          <mat-form-field appearance="outline" class="max-h-max h-full">
            <mat-label>Nombres</mat-label>
            <mat-icon class="text-blue-gray-700" matPrefix>people</mat-icon>
            <input
              type="text"
              formControlName="nombre"
              name="nombre"
              matInput
            />
            @if(hasError('nombre', 'required')) {
            <mat-error>Ingrese sus nombres</mat-error> }
          </mat-form-field>
          <mat-form-field appearance="outline" class="max-h-max h-full">
            <mat-label>Apellidos</mat-label>
            <mat-icon class="text-blue-gray-700" matPrefix>people</mat-icon>
            <input
              type="text"
              formControlName="apellido"
              name="apellido"
              matInput
            />
            @if(hasError('apellido', 'required')) {
            <mat-error>Ingrese sus apellidos</mat-error> }
          </mat-form-field>
        </div>
        <mat-form-field appearance="outline" class="max-h-max h-full">
          <mat-label>Correo electrònico</mat-label>
          <mat-icon class="text-blue-gray-700" matPrefix>mail</mat-icon>
          <input type="email" formControlName="email" name="email" matInput />
          @if(hasError('email', 'required')) {
          <mat-error>El correo es requerido</mat-error> } @if(hasError('email',
          'email')) { <mat-error>Debe especificar un correo vàlido</mat-error> }
        </mat-form-field>
        <mat-form-field appearance="outline" class="max-h-max h-full">
          <mat-label>Contraseña</mat-label>
          <mat-icon class="text-blue-gray-700" matPrefix>lock</mat-icon>
          <input
            [type]="hide ? 'password' : 'text'"
            formControlName="password"
            name="password"
            matInput
          />
          <button
            type="button"
            mat-icon-button
            matSuffix
            (click)="hide = !hide"
            [attr.aria-label]="'Hide password'"
            [attr.aria-pressed]="hide"
          >
            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
          @if(hasError('password', 'required')) {
          <mat-error>La contraseña requerida</mat-error> }
          @if(hasError('password', 'pattern')) {
          <mat-error>Contraseña invalida</mat-error> }
        </mat-form-field>
        <mat-form-field appearance="outline" class="max-h-max h-full">
          <mat-label>Confirmar contraseña</mat-label>
          <mat-icon class="text-blue-gray-700" matPrefix>lock</mat-icon>
          <input
            [type]="hide ? 'password' : 'text'"
            formControlName="confirmPassword"
            name="confirmPassword"
            matInput
          />
          <button
            type="button"
            mat-icon-button
            matSuffix
            (click)="hide = !hide"
            [attr.aria-label]="'Hide password'"
            [attr.aria-pressed]="hide"
          >
            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
          @if(hasError('password', 'required')) {
          <mat-error>Ingrese de nuevo su contraseña</mat-error> }
          @if(hasError('password', 'pattern')) {
          <mat-error>Contraseña invalida</mat-error> }
        </mat-form-field>
      </div>
      <!-- Button -->
      <button
        type="submit"
        mat-flat-button
        color="primary"
        class="bg-[#222338] !rounded-lg !h-12"
      >
        <div class="text-center !py-[0.625rem] !px-5 font-semibold text-base">
          Siguiente
        </div>
      </button>
    </form>
  </div>
  <footer class="flex justify-center gap-3">
    <p class="font-normal text-base">¿Ya tienes una cuenta?</p>
    <a
      class="text-[#009D92] font-semibold text-base"
      [routerLink]="'/auth/login'"
      >Iniciar sesión</a
    >
  </footer>
  } @if (page == 2) {
  <!-- Stepper -->
  <div class="grid grid-flow-col gap-2">
    <section class="flex flex-col gap-1.5">
      <span class="h-1 w-full rounded-3xl bg-[#697386]"></span>
      <div class="flex items-center justify-start gap-1">
        <svg
          width="16"
          height="16"
          viewBox="0 0 16 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M15.75 8C15.75 12.2802 12.2802 15.75 8 15.75C3.71978 15.75 0.25 12.2802 0.25 8C0.25 3.71978 3.71978 0.25 8 0.25C12.2802 0.25 15.75 3.71978 15.75 8ZM7.10356 12.1036L12.8536 6.35356C13.0488 6.15831 13.0488 5.84172 12.8536 5.64647L12.1465 4.93937C11.9512 4.74409 11.6346 4.74409 11.4393 4.93937L6.75 9.62869L4.56066 7.43934C4.36541 7.24409 4.04881 7.24409 3.85353 7.43934L3.14644 8.14644C2.95119 8.34169 2.95119 8.65828 3.14644 8.85353L6.39644 12.1035C6.59172 12.2988 6.90828 12.2988 7.10356 12.1036Z"
            fill="#697386"
          />
        </svg>
        <p class="text-sm font-medium">Datos de usuario</p>
      </div>
    </section>
    <section class="flex flex-col gap-1.5">
      <span class="h-1 w-full rounded-3xl bg-[#5469D4]"></span>
      <div class="flex items-center justify-start gap-1">
        <svg
          width="16"
          height="16"
          viewBox="0 0 16 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M8 0.25C3.71978 0.25 0.25 3.71978 0.25 8C0.25 12.2802 3.71978 15.75 8 15.75C12.2802 15.75 15.75 12.2802 15.75 8C15.75 3.71978 12.2802 0.25 8 0.25ZM10.5 8C10.5 9.3785 9.3785 10.5 8 10.5C6.6215 10.5 5.5 9.3785 5.5 8C5.5 6.6215 6.6215 5.5 8 5.5C9.3785 5.5 10.5 6.6215 10.5 8Z"
            fill="#5469D4"
          />
        </svg>
        <p class="text-sm font-medium">Datos de empresa</p>
      </div>
    </section>
  </div>

  <!-- Page step 2 -->
  <div class="flex flex-col gap-[0.75rem]">
    <h2 class="text-[#1C1C1E] font-medium text-xl">
      Permítenos conocerte mejor
    </h2>
    <p class="text-base font-normal mb-4">
      Por favor, ingrese los datos de su empresa
    </p>
    <form
      class="flex flex-col gap-6"
      [formGroup]="formEntity"
      (ngSubmit)="register()"
    >
      <!-- Input -->
      <div class="flex flex-col gap-4">
        <div class="flex gap-4">
          <mat-form-field appearance="outline" class="max-h-max h-full">
            <mat-label>RUC</mat-label>
            <mat-icon class="text-blue-gray-700" matPrefix>badge</mat-icon>
            <input type="number" formControlName="ruc" name="ruc" matInput />
            @if(hasErrorEntity('ruc', 'required')) {
            <mat-error>El ruc es requerido</mat-error> }
          </mat-form-field>
          <mat-form-field appearance="outline" class="max-h-max h-full">
            <mat-label>Nombre</mat-label>
            <mat-icon class="text-blue-gray-700" matPrefix>apartment</mat-icon>
            <input
              type="text"
              formControlName="nombre"
              name="nombre"
              matInput
            />
            @if(hasErrorEntity('nombre', 'required')) {
            <mat-error>El nombre de su empresa es requerido</mat-error> }
          </mat-form-field>
        </div>
        <mat-form-field appearance="outline" class="max-h-max h-full">
          <mat-label>Razon social</mat-label>
          <mat-icon class="text-blue-gray-700" matPrefix>people</mat-icon>
          <input
            type="text"
            formControlName="razonSocial"
            name="razonSocial"
            matInput
          />
          @if(hasErrorEntity('razonSocial', 'required')) {
          <mat-error>La razón social es requerida</mat-error> }
        </mat-form-field>
        <mat-form-field appearance="outline" class="max-h-max h-full">
          <mat-label>Telefono</mat-label>
          <mat-icon class="text-blue-gray-700" matPrefix>phone</mat-icon>
          <input
            type="tel"
            formControlName="telefono"
            name="telefono"
            matInput
          />
          @if(hasErrorEntity('telefono', 'required')) {
          <mat-error>Debe ingresar el telefono de su empresa</mat-error> }
        </mat-form-field>
      </div>
      <!-- Button -->
      <div class="flex flex-col gap-2">
        <button
          type="submit"
          color="primary"
          class="bg-[#222338] !rounded-lg !h-12"
          mat-flat-button
        >
          <div class="text-center !py-[0.625rem] !px-5 font-semibold text-base">
            Registrarse
          </div>
        </button>
        <button
          type="button"
          class="font-semibold text-sm !text-[#009D92]"
          (click)="volver()"
          mat-button
        >
          <div class="text-center !py-[0.625rem] !px-5 font-semibold text-base">
            Volver
          </div>
        </button>
      </div>
    </form>
  </div>
  <footer class="flex justify-center gap-3">
    <p class="font-normal text-base">¿Ya tienes una cuenta?</p>
    <a
      class="text-[#009D92] font-semibold text-base"
      [routerLink]="'/auth/login'"
      >Iniciar sesión</a
    >
  </footer>
  }
</div>
